<table class="table table-hover text-center table-bordered table-responsive">
	<thead class="thead-inverse">
		<tr>
			<th class="sticky" style="width: 16.66vw">Channel</th>
			{{#each providers as provider}}
			<th class="sticky text-center" style="width: 16.66vw">
					{{provider.name}}
			</th>
			{{/each}}
		</tr>
	</thead>
	<tbody>
		{{#each channels as channel}}
		<tr>
			<th scope="row">{{channel.Name}}</th>
			{{#each providers as provider}}
				<td>
					{{#each getBadges(channel, provider) as badge}}
						<span class="badge badge-pill {{badge.className}}" style="margin: 1px;">{{badge.text}}</span>
					{{/each}}
				</td>
			{{/each}}
		</tr>
		{{/each}}
	</tbody>
</table>

<script>

	export default {
		helpers: {
			getBadges(channel, provider) {
				const badges = provider.badges
				const providerChannelSupport = channel.Providers[provider.name]

				if (typeof providerChannelSupport === 'object') {
					return Object.keys(providerChannelSupport)
						.filter(id => providerChannelSupport[id])
						.map(id => badges[id])
				} else {
					const id = providerChannelSupport || 'false'
					return [ badges[id] ]
				}
			}
		}
	}
</script>
